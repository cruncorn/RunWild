<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animal Matching Game</title>
    <style>
body {
    font-family: Arial, sans-serif;
    background-color: #2196F3;
    color: white;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
}

#game-container {
    text-align: center;
    max-width: 100vw;
    padding: 10px;
}

h1 {
    margin-bottom: 20px;
}

p {
    margin-bottom: 20px;
    font-size: 16px;
}

#player-selection {
    margin-bottom: 20px;
}

#start-game {
    padding: 10px 20px;
    font-size: 16px;
    background-color: #2196F3;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

#game-board {
    display: none;
}

#game-board:not(.hidden) {
    display: block;
}

#scores {
    display: flex;
    justify-content: center;
    margin-bottom: 10px;
}

.score {
    margin: 0 10px;
    font-size: 18px;
}

.hidden {
    display: none;
}

#grid {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    grid-template-rows: repeat(7, 1fr);
    gap: 5px;
    max-width: 90vw;
    max-height: 70vh;
    aspect-ratio: 6/7;
    margin: 0 auto;
}

.tile {
    background-color: #ccc;
    border-radius: 5px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2rem;
    cursor: pointer;
    user-select: none;
    transition: transform 0.3s;
}

.tile.flipped {
    background-color: white;
    color: black;
}

.tile.matched {
    background-color: #8BC34A;
    pointer-events: none;
}

#current-player {
    margin-top: 20px;
    font-size: 20px;
}
    </style>
</head>
<body>
    <div id="game-container">
        <h1>RunWild</h1>
        <p>A Runcorn Family Matching Game</p>
        <div id="player-selection">
            <label for="players">Number of Players:</label>
            <select id="players">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
            </select>
            <button id="start-game">Start Game</button>
        </div>
        <div id="game-board" class="hidden">
            <div id="scores">
                <div class="score" id="score1">Player 1: 0</div>
                <div class="score" id="score2" class="hidden">Player 2: 0</div>
                <div class="score" id="score3" class="hidden">Player 3: 0</div>
            </div>
            <div id="grid"></div>
            <div id="current-player">Player 1's turn</div>
        </div>
    </div>
    <script>
const animals = ['ðŸ¶', 'ðŸ±', 'ðŸ­', 'ðŸ¹', 'ðŸ°', 'ðŸ¦Š', 'ðŸ»', 'ðŸ¼', 'ðŸ¨', 'ðŸ¯', 'ðŸ¦', 'ðŸ¸', 'ðŸµ', 'ðŸ”', 'ðŸ§', 'ðŸ¦', 'ðŸ¦†', 'ðŸ¦‰', 'ðŸ¦‡', 'ðŸº', 'ðŸ—', 'ðŸ´', 'ðŸ¦„'];

let numPlayers = 1;
let currentPlayer = 1;
let scores = [0, 0, 0];
let flippedTiles = [];
let matchedPairs = 0;
let tiles = [];

document.getElementById('start-game').addEventListener('click', startGame);

function startGame() {
    numPlayers = parseInt(document.getElementById('players').value);
    document.getElementById('player-selection').classList.add('hidden');
    document.getElementById('game-board').classList.remove('hidden');
    if (numPlayers > 1) {
        document.getElementById('score2').classList.remove('hidden');
        if (numPlayers > 2) {
            document.getElementById('score3').classList.remove('hidden');
        }
    }
    createGrid();
    updateCurrentPlayer();
}

function createGrid() {
    const grid = document.getElementById('grid');
    grid.innerHTML = '';
    const shuffledAnimals = shuffle([...animals.slice(0, 21), ...animals.slice(0, 21)]);
    for (let i = 0; i < 42; i++) {
        const tile = document.createElement('div');
        tile.classList.add('tile');
        tile.dataset.animal = shuffledAnimals[i];
        tile.addEventListener('click', () => flipTile(tile));
        grid.appendChild(tile);
        tiles.push(tile);
    }
}

function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function flipTile(tile) {
    if (tile.classList.contains('flipped') || tile.classList.contains('matched') || flippedTiles.length >= 2) return;
    tile.classList.add('flipped');
    tile.textContent = tile.dataset.animal;
    flippedTiles.push(tile);
    if (flippedTiles.length === 2) {
        setTimeout(checkMatch, 1000);
    }
}

function checkMatch() {
    const [tile1, tile2] = flippedTiles;
    if (tile1.dataset.animal === tile2.dataset.animal) {
        tile1.classList.add('matched');
        tile2.classList.add('matched');
        scores[currentPlayer - 1]++;
        matchedPairs++;
        updateScores();
        if (matchedPairs === 21) {
            alert(`Game over! Player ${currentPlayer} wins!`);
        }
    } else {
        tile1.classList.remove('flipped');
        tile1.textContent = '';
        tile2.classList.remove('flipped');
        tile2.textContent = '';
        if (numPlayers > 1) {
            currentPlayer = currentPlayer % numPlayers + 1;
            updateCurrentPlayer();
        }
    }
    flippedTiles = [];
}

function updateScores() {
    document.getElementById('score1').textContent = `Player 1: ${scores[0]}`;
    document.getElementById('score2').textContent = `Player 2: ${scores[1]}`;
    document.getElementById('score3').textContent = `Player 3: ${scores[2]}`;
}

function updateCurrentPlayer() {
    document.getElementById('current-player').textContent = `Player ${currentPlayer}'s turn`;
}
    </script>
</body>
</html>